{%- extends "blog/blogpage/base.html" %}
{%- import "bootstrap_wtf.html" as wtf %}

{%- block title -%}
{{ title }}
{{ super() }}
{%- endblock -%}

{%- block content %}
<div class="pt-2">
  <h1 class="blogpage-name">{{ title }}</h1>
  {%- if subtitle != "" %}
    <h2 class="blogpage-subname mt-2">{{ subtitle }}</h2>
  {%- endif %}

  {%- if current_user.is_authenticated %}
    {{ wtf.quick_form(create_blogpost_button, action=url_for("blog." ~ blog_id ~ ".create_blogpost_button"), id="auth-reload-create-blogpost-btn", class="login-req-form auth-true", btn_type="info", bottom_margin=0) }}
  {%- else %}
    {{ wtf.quick_form(create_blogpost_button, action=url_for("blog." ~ blog_id ~ ".create_blogpost_button"), id="auth-reload-create-blogpost-btn", class="login-req-form auth-true", btn_type="info", bottom_margin=0, hidden=true) }}
  {%- endif %}
</div>
<hr>

<div>
  {%- for post in posts %}
    <div>
      <a class="link-hover underline-customgreen" href="{{ url_for('blog.' ~ blog_id ~ '.post', post_sanitized_title=post.sanitized_title) }}">
        <h1 class="postlist-post-title customgreen mb-1">{{ post.title }}</h1>
        {%- if post.subtitle != "" %}
          <h2 class="postlist-post-subtitle customorange mb-1">{{ post.subtitle }}</h2>
        {%- endif %}
        {%- if post.edited_timestamp is not none %}
          <h3 class="postlist-post-timestamp black pt-2">{{ moment(post.timestamp).format("l") }} | EDITED {{ moment(post.edited_timestamp).format("l") }}</h3>
        {%- else %}
          <h3 class="postlist-post-timestamp black pt-2">{{ moment(post.timestamp).format("l") }}</></h3>
        {%- endif %}
      </a>
    </div>
    <hr>
  {%- endfor %}
</div>
{%- endblock %}
